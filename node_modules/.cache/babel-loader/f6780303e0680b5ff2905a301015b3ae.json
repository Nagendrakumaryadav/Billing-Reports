{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { isString } from '@antv/util';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-tooltip {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .tooltip-type {\\n    padding: 0;\\n    margin: 0;\\n  }\\n  .tooltip-id {\\n    color: #531dab;\\n  }\\n\");\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n\n  function Tooltip() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tooltip.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(e) {\n        return \"\\n          <h4 class='tooltip-type'>\\u7C7B\\u578B\\uFF1A\" + e.item.getType() + \"</h4>\\n          <span class='tooltip-id'>ID\\uFF1A\" + e.item.getID() + \"</span>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Tooltip.prototype.getEvents = function () {\n    return {\n      'node:mouseenter': 'onMouseEnter',\n      'node:mouseleave': 'onMouseLeave',\n      'node:mousemove': 'onMouseMove',\n      'edge:mouseenter': 'onMouseEnter',\n      'edge:mouseleave': 'onMouseLeave',\n      'edge:mousemove': 'onMouseMove',\n      'combo:mouseenter': 'onMouseEnter',\n      'combo:mouseleave': 'onMouseLeave',\n      'combo:mousemove': 'onMouseMove',\n      afterremoveitem: 'onMouseLeave',\n      contextmenu: 'onMouseLeave',\n      'node:drag': 'onMouseLeave'\n    };\n  };\n\n  Tooltip.prototype.init = function () {\n    var className = this.get('className') || 'g6-component-tooltip';\n    var tooltip = createDom(\"<div class=\" + className + \"></div>\");\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    modifyCSS(tooltip, {\n      position: 'absolute',\n      visibility: 'hidden',\n      display: 'none'\n    });\n    container.appendChild(tooltip);\n    this.set('tooltip', tooltip);\n  };\n\n  Tooltip.prototype.onMouseEnter = function (e) {\n    var itemTypes = this.get('itemTypes');\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n    var item = e.item;\n    var graph = this.get('graph');\n    this.currentTarget = item;\n    this.showTooltip(e);\n    graph.emit('tooltipchange', {\n      item: e.item,\n      action: 'show'\n    });\n  };\n\n  Tooltip.prototype.onMouseMove = function (e) {\n    var itemTypes = this.get('itemTypes');\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n\n    if (!this.currentTarget || e.item !== this.currentTarget) {\n      return;\n    }\n\n    this.showTooltip(e);\n  };\n\n  Tooltip.prototype.onMouseLeave = function () {\n    this.hideTooltip();\n    var graph = this.get('graph');\n    graph.emit('tooltipchange', {\n      item: this.currentTarget,\n      action: 'hide'\n    });\n    this.currentTarget = null;\n  };\n\n  Tooltip.prototype.showTooltip = function (e) {\n    if (!e.item) {\n      return;\n    }\n\n    var itemTypes = this.get('itemTypes');\n    if (e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n    var container = this.get('tooltip');\n    var getContent = this.get('getContent');\n    var tooltip = getContent(e);\n\n    if (isString(tooltip)) {\n      container.innerHTML = tooltip;\n    } else {\n      container.innerHTML = tooltip.outerHTML;\n    }\n\n    this.updatePosition(e);\n  };\n\n  Tooltip.prototype.hideTooltip = function () {\n    var tooltip = this.get('tooltip');\n\n    if (tooltip) {\n      modifyCSS(tooltip, {\n        visibility: 'hidden',\n        display: 'none'\n      });\n    }\n  };\n\n  Tooltip.prototype.updatePosition = function (e) {\n    var shouldBegin = this.get('shouldBegin');\n    var tooltip = this.get('tooltip');\n\n    if (!shouldBegin(e)) {\n      modifyCSS(tooltip, {\n        visibility: 'hidden',\n        display: 'none'\n      });\n      return;\n    }\n\n    var graph = this.get('graph');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0; // const mousePos = graph.getPointByClient(e.clientX, e.clientY);\n\n    var point = graph.getPointByClient(e.clientX, e.clientY);\n\n    var _a = graph.getCanvasByPoint(point.x, point.y),\n        x = _a.x,\n        y = _a.y; // let x = mousePos.x + offsetX;\n    // let y = mousePos.y + offsetY;\n    // let x = e.x + offsetX;\n    // let y = e.y + offsetY;\n\n\n    x += offsetX;\n    y += offsetY;\n    var bbox = tooltip.getBoundingClientRect();\n\n    if (x + bbox.width > width) {\n      x = x - bbox.width - offsetX;\n    }\n\n    if (y + bbox.height > height) {\n      y = y - bbox.height - offsetY;\n    }\n\n    modifyCSS(tooltip, {\n      left: x + \"px\",\n      top: y + \"px\",\n      visibility: 'visible',\n      display: 'unset'\n    });\n  };\n\n  Tooltip.prototype.hide = function () {\n    this.onMouseLeave();\n  };\n\n  Tooltip.prototype.destroy = function () {\n    var tooltip = this.get('tooltip');\n\n    if (tooltip) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(tooltip);\n    }\n  };\n\n  return Tooltip;\n}(Base);\n\nexport default Tooltip;","map":{"version":3,"sources":["C:/Users/HP/Desktop/HTML Training - Copy/React-Projects/scratch/scratch/node_modules/@antv/g6-plugin/es/tooltip/index.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","modifyCSS","createDom","isString","insertCss","Base","Tooltip","_super","apply","arguments","getDefaultCfgs","offsetX","offsetY","getContent","e","item","getType","getID","shouldBegin","itemTypes","getEvents","afterremoveitem","contextmenu","init","className","get","tooltip","container","document","getElementById","position","visibility","display","appendChild","set","onMouseEnter","indexOf","graph","currentTarget","showTooltip","emit","action","onMouseMove","onMouseLeave","hideTooltip","innerHTML","outerHTML","updatePosition","width","height","point","getPointByClient","clientX","clientY","_a","getCanvasByPoint","x","y","bbox","getBoundingClientRect","left","top","hide","destroy","removeChild"],"mappings":"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","sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { isString } from '@antv/util';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-tooltip {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .tooltip-type {\\n    padding: 0;\\n    margin: 0;\\n  }\\n  .tooltip-id {\\n    color: #531dab;\\n  }\\n\");\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n\n  function Tooltip() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tooltip.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(e) {\n        return \"\\n          <h4 class='tooltip-type'>\\u7C7B\\u578B\\uFF1A\" + e.item.getType() + \"</h4>\\n          <span class='tooltip-id'>ID\\uFF1A\" + e.item.getID() + \"</span>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Tooltip.prototype.getEvents = function () {\n    return {\n      'node:mouseenter': 'onMouseEnter',\n      'node:mouseleave': 'onMouseLeave',\n      'node:mousemove': 'onMouseMove',\n      'edge:mouseenter': 'onMouseEnter',\n      'edge:mouseleave': 'onMouseLeave',\n      'edge:mousemove': 'onMouseMove',\n      'combo:mouseenter': 'onMouseEnter',\n      'combo:mouseleave': 'onMouseLeave',\n      'combo:mousemove': 'onMouseMove',\n      afterremoveitem: 'onMouseLeave',\n      contextmenu: 'onMouseLeave',\n      'node:drag': 'onMouseLeave'\n    };\n  };\n\n  Tooltip.prototype.init = function () {\n    var className = this.get('className') || 'g6-component-tooltip';\n    var tooltip = createDom(\"<div class=\" + className + \"></div>\");\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    if (isString(container)) {\n      container = document.getElementById(container);\n    }\n\n    modifyCSS(tooltip, {\n      position: 'absolute',\n      visibility: 'hidden',\n      display: 'none'\n    });\n    container.appendChild(tooltip);\n    this.set('tooltip', tooltip);\n  };\n\n  Tooltip.prototype.onMouseEnter = function (e) {\n    var itemTypes = this.get('itemTypes');\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n    var item = e.item;\n    var graph = this.get('graph');\n    this.currentTarget = item;\n    this.showTooltip(e);\n    graph.emit('tooltipchange', {\n      item: e.item,\n      action: 'show'\n    });\n  };\n\n  Tooltip.prototype.onMouseMove = function (e) {\n    var itemTypes = this.get('itemTypes');\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n\n    if (!this.currentTarget || e.item !== this.currentTarget) {\n      return;\n    }\n\n    this.showTooltip(e);\n  };\n\n  Tooltip.prototype.onMouseLeave = function () {\n    this.hideTooltip();\n    var graph = this.get('graph');\n    graph.emit('tooltipchange', {\n      item: this.currentTarget,\n      action: 'hide'\n    });\n    this.currentTarget = null;\n  };\n\n  Tooltip.prototype.showTooltip = function (e) {\n    if (!e.item) {\n      return;\n    }\n\n    var itemTypes = this.get('itemTypes');\n    if (e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) return;\n    var container = this.get('tooltip');\n    var getContent = this.get('getContent');\n    var tooltip = getContent(e);\n\n    if (isString(tooltip)) {\n      container.innerHTML = tooltip;\n    } else {\n      container.innerHTML = tooltip.outerHTML;\n    }\n\n    this.updatePosition(e);\n  };\n\n  Tooltip.prototype.hideTooltip = function () {\n    var tooltip = this.get('tooltip');\n\n    if (tooltip) {\n      modifyCSS(tooltip, {\n        visibility: 'hidden',\n        display: 'none'\n      });\n    }\n  };\n\n  Tooltip.prototype.updatePosition = function (e) {\n    var shouldBegin = this.get('shouldBegin');\n    var tooltip = this.get('tooltip');\n\n    if (!shouldBegin(e)) {\n      modifyCSS(tooltip, {\n        visibility: 'hidden',\n        display: 'none'\n      });\n      return;\n    }\n\n    var graph = this.get('graph');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0; // const mousePos = graph.getPointByClient(e.clientX, e.clientY);\n\n    var point = graph.getPointByClient(e.clientX, e.clientY);\n\n    var _a = graph.getCanvasByPoint(point.x, point.y),\n        x = _a.x,\n        y = _a.y; // let x = mousePos.x + offsetX;\n    // let y = mousePos.y + offsetY;\n    // let x = e.x + offsetX;\n    // let y = e.y + offsetY;\n\n\n    x += offsetX;\n    y += offsetY;\n    var bbox = tooltip.getBoundingClientRect();\n\n    if (x + bbox.width > width) {\n      x = x - bbox.width - offsetX;\n    }\n\n    if (y + bbox.height > height) {\n      y = y - bbox.height - offsetY;\n    }\n\n    modifyCSS(tooltip, {\n      left: x + \"px\",\n      top: y + \"px\",\n      visibility: 'visible',\n      display: 'unset'\n    });\n  };\n\n  Tooltip.prototype.hide = function () {\n    this.onMouseLeave();\n  };\n\n  Tooltip.prototype.destroy = function () {\n    var tooltip = this.get('tooltip');\n\n    if (tooltip) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      if (isString(container)) {\n        container = document.getElementById(container);\n      }\n\n      container.removeChild(tooltip);\n    }\n  };\n\n  return Tooltip;\n}(Base);\n\nexport default Tooltip;"]},"metadata":{},"sourceType":"module"}