{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\HTML Training - Copy\\\\React-Projects\\\\scratch\\\\scratch\\\\src\\\\organisms\\\\billingDetails\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport \"../../app.scss\";\nimport React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { isEmpty } from \"../../utils/helper\";\nimport { addBill, removeBill, updateBill } from \"../../store/actions\";\nimport { Button, DatePicker, Dropdown, Input, Menu, Modal, Typography, Card } from \"antd\";\nimport { PlusOutlined, EditOutlined, DeleteOutlined, DownOutlined } from \"@ant-design/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst BillingDetails = () => {\n  _s();\n\n  const {\n    Meta\n  } = Card;\n  const {\n    Text\n  } = Typography;\n  const [amount, setAmount] = useState(0);\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [date, setDate] = useState();\n  const [id, setBillId] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\n  const [missingFields, setMissingFields] = useState(false);\n  const [addModalVisible, setAddModalVisible] = useState(false);\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const bills = useSelector(state => state.bills);\n  const dispatch = useDispatch();\n\n  const resetStates = () => {\n    setAmount(0);\n    setCategory(\"\");\n    setDescription(\"\");\n    setBillId(\"\");\n    setDate(null);\n    setMissingFields(false);\n    setAddModalVisible(false);\n    setEditModalVisible(false);\n  };\n\n  useEffect(() => {\n    if (id) {\n      const bill = bills.filter(bill => bill.id === id)[0];\n      setAmount(bill.amount);\n      setDate(bill.date);\n      setCategory(bill.category);\n      setDescription(bill.description);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [id]);\n\n  const areEmptySpaces = str => str === \"\" || str.match(/^ *$/) !== null;\n\n  const validateFields = () => amount && !areEmptySpaces(category) && date && !areEmptySpaces(description);\n\n  const handleAddBill = () => {\n    if (validateFields()) {\n      dispatch(addBill({\n        amount,\n        category,\n        description,\n        date\n      }));\n      setMissingFields(false);\n      resetStates();\n    } else {\n      setMissingFields(true);\n    }\n  };\n\n  const handleBillRemoval = bill => {\n    dispatch(removeBill(bill));\n    setAddModalVisible(false);\n  };\n\n  const handleBillUpdate = () => {\n    if (validateFields()) {\n      dispatch(updateBill({\n        id,\n        amount,\n        category,\n        description,\n        date\n      }));\n      setMissingFields(false);\n      resetStates();\n    } else {\n      setMissingFields(true);\n    }\n  };\n\n  const handleBillEdit = bill => {\n    setBillId(bill.id);\n    setEditModalVisible(true);\n  };\n\n  const getFilteredBills = () => {\n    if (!categoryFilter) {\n      return bills;\n    }\n\n    return bills.filter(bill => bill.category === categoryFilter);\n  };\n\n  const menu = () => {\n    const billingCategories = new Set();\n    bills.map(bill => billingCategories.add(bill.category));\n    return /*#__PURE__*/_jsxDEV(Menu, {\n      children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n        onClick: () => setCategoryFilter(\"\"),\n        children: \"None\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), [...billingCategories].map((category, index) => /*#__PURE__*/_jsxDEV(Menu.Item, {\n        onClick: () => setCategoryFilter(category),\n        children: category\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"billing-details-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"billing-details-header\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this),\n        size: \"large\",\n        onClick: () => setAddModalVisible(true),\n        children: \"Add Bill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n        overlay: menu(),\n        trigger: [\"click\"],\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          children: [`Filter By Category ${categoryFilter ? ` : ${categoryFilter}` : ``}`, /*#__PURE__*/_jsxDEV(DownOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Add Bill\",\n      centered: true,\n      visible: addModalVisible || editModalVisible,\n      onOk: () => editModalVisible ? handleBillUpdate() : handleAddBill(),\n      onCancel: () => resetStates(),\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Enter Amount\",\n        required: true,\n        value: amount ? String(amount) : \"\",\n        onChange: event => setAmount(Number(event.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Enter Category\",\n        required: true,\n        value: category,\n        onChange: event => setCategory(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Enter Description\",\n        required: true,\n        value: description,\n        onChange: event => setDescription(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n        format: \"DD-MM-YYYY\",\n        value: date,\n        onChange: (value, dateString) => setDate(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), missingFields && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          type: \"danger\",\n          children: \"Please fill all the fields.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"billing-details-content\",\n      children: !isEmpty(getFilteredBills()) && getFilteredBills().map(bill => {\n        return /*#__PURE__*/_jsxDEV(Card, {\n          actions: [/*#__PURE__*/_jsxDEV(EditOutlined, {\n            color: \"green\",\n            onClick: () => handleBillEdit(bill)\n          }, \"edit\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n            color: \"red\",\n            onClick: () => handleBillRemoval(bill)\n          }, \"delete\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 19\n          }, this)],\n          children: [/*#__PURE__*/_jsxDEV(Meta, {\n            title: `${bill.amount} $`,\n            description: `${bill.category}`,\n            className: \"bill-header\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Meta, {\n            description: `${bill.description}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Meta, {\n            description: moment(bill.date).format(\"DD-MM-YYYY\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 17\n          }, this)]\n        }, bill.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BillingDetails, \"tS5arGPq+J7KzaXxRhcf8u4yWRs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = BillingDetails;\nexport default BillingDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"BillingDetails\");","map":{"version":3,"sources":["C:/Users/HP/Desktop/HTML Training - Copy/React-Projects/scratch/scratch/src/organisms/billingDetails/index.tsx"],"names":["React","useState","useEffect","moment","useDispatch","useSelector","isEmpty","addBill","removeBill","updateBill","Button","DatePicker","Dropdown","Input","Menu","Modal","Typography","Card","PlusOutlined","EditOutlined","DeleteOutlined","DownOutlined","BillingDetails","Meta","Text","amount","setAmount","category","setCategory","description","setDescription","date","setDate","id","setBillId","categoryFilter","setCategoryFilter","missingFields","setMissingFields","addModalVisible","setAddModalVisible","editModalVisible","setEditModalVisible","bills","state","dispatch","resetStates","bill","filter","areEmptySpaces","str","match","validateFields","handleAddBill","handleBillRemoval","handleBillUpdate","handleBillEdit","getFilteredBills","menu","billingCategories","Set","map","add","index","String","event","Number","target","value","dateString","format"],"mappings":"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","sourcesContent":["import \"../../app.scss\";\nimport React, { useState, useEffect } from \"react\";\nimport moment, { Moment } from \"moment\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { isEmpty } from \"../../utils/helper\";\nimport { addBill, removeBill, updateBill } from \"../../store/actions\";\nimport {\n  Button,\n  DatePicker,\n  Dropdown,\n  Input,\n  Menu,\n  Modal,\n  Typography,\n  Card,\n} from \"antd\";\nimport {\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  DownOutlined,\n} from \"@ant-design/icons\";\n\nconst BillingDetails: React.FC = () => {\n  const { Meta } = Card;\n  const { Text } = Typography;\n  const [amount, setAmount] = useState<number>(0);\n  const [category, setCategory] = useState<string>(\"\");\n  const [description, setDescription] = useState<string>(\"\");\n  const [date, setDate] = useState<Moment | null>();\n  const [id, setBillId] = useState<string | undefined>(\"\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"\");\n  const [missingFields, setMissingFields] = useState<boolean>(false);\n  const [addModalVisible, setAddModalVisible] = useState<boolean>(false);\n  const [editModalVisible, setEditModalVisible] = useState<boolean>(false);\n\n  const bills = useSelector((state: BillingState) => state.bills);\n  const dispatch = useDispatch();\n\n  const resetStates = () => {\n    setAmount(0);\n    setCategory(\"\");\n    setDescription(\"\");\n    setBillId(\"\");\n    setDate(null);\n    setMissingFields(false);\n    setAddModalVisible(false);\n    setEditModalVisible(false);\n  };\n\n  useEffect(() => {\n    if (id) {\n      const bill: IBilling = bills.filter(\n        (bill: IBilling) => bill.id === id\n      )[0];\n      setAmount(bill.amount);\n      setDate(bill.date);\n      setCategory(bill.category);\n      setDescription(bill.description);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const areEmptySpaces = (str: string) =>\n    str === \"\" || str.match(/^ *$/) !== null;\n\n  const validateFields = () =>\n    amount && !areEmptySpaces(category) && date && !areEmptySpaces(description);\n\n  const handleAddBill = () => {\n    if (validateFields()) {\n      dispatch(addBill({ amount, category, description, date }));\n      setMissingFields(false);\n      resetStates();\n    } else {\n      setMissingFields(true);\n    }\n  };\n\n  const handleBillRemoval = (bill: IBilling) => {\n    dispatch(removeBill(bill));\n    setAddModalVisible(false);\n  };\n\n  const handleBillUpdate = () => {\n    if (validateFields()) {\n      dispatch(updateBill({ id, amount, category, description, date }));\n      setMissingFields(false);\n      resetStates();\n    } else {\n      setMissingFields(true);\n    }\n  };\n\n  const handleBillEdit = (bill: IBilling) => {\n    setBillId(bill.id);\n    setEditModalVisible(true);\n  };\n\n  const getFilteredBills = () => {\n    if (!categoryFilter) {\n      return bills;\n    }\n    return bills.filter((bill: IBilling) => bill.category === categoryFilter);\n  };\n\n  const menu = () => {\n    const billingCategories = new Set<string>();\n    bills.map((bill: IBilling) => billingCategories.add(bill.category));\n    return (\n      <Menu>\n        <Menu.Item onClick={() => setCategoryFilter(\"\")}>None</Menu.Item>\n        <Menu.Divider />\n        {[...billingCategories].map((category: string, index) => (\n          <Menu.Item key={index} onClick={() => setCategoryFilter(category)}>\n            {category}\n          </Menu.Item>\n        ))}\n      </Menu>\n    );\n  };\n\n  return (\n    <div className=\"billing-details-container\">\n      <div className=\"billing-details-header\">\n        <Button\n          type=\"primary\"\n          icon={<PlusOutlined />}\n          size=\"large\"\n          onClick={() => setAddModalVisible(true)}\n        >\n          Add Bill\n        </Button>\n        <Dropdown overlay={menu()} trigger={[\"click\"]}>\n          <Button>\n            {`Filter By Category ${\n              categoryFilter ? ` : ${categoryFilter}` : ``\n            }`}\n            <DownOutlined />\n          </Button>\n        </Dropdown>\n      </div>\n      <Modal\n        title=\"Add Bill\"\n        centered\n        visible={addModalVisible || editModalVisible}\n        onOk={() => (editModalVisible ? handleBillUpdate() : handleAddBill())}\n        onCancel={() => resetStates()}\n      >\n        <Input\n          placeholder=\"Enter Amount\"\n          required\n          value={amount ? String(amount) : \"\"}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            setAmount(Number(event.target.value))\n          }\n        />\n        <Input\n          placeholder=\"Enter Category\"\n          required\n          value={category}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            setCategory(event.target.value)\n          }\n        />\n        <Input\n          placeholder=\"Enter Description\"\n          required\n          value={description}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            setDescription(event.target.value)\n          }\n        />\n        <DatePicker\n          format=\"DD-MM-YYYY\"\n          value={date}\n          onChange={(value: Moment | null, dateString: string) =>\n            setDate(value)\n          }\n        />\n        {missingFields && (\n          <>\n            <br />\n            <br />\n            <Text type=\"danger\">Please fill all the fields.</Text>\n          </>\n        )}\n      </Modal>\n      <div className=\"billing-details-content\">\n        {!isEmpty(getFilteredBills()) &&\n          getFilteredBills().map((bill: IBilling) => {\n            return (\n              <Card\n                key={bill.id}\n                actions={[\n                  <EditOutlined\n                    key=\"edit\"\n                    color=\"green\"\n                    onClick={() => handleBillEdit(bill)}\n                  />,\n                  <DeleteOutlined\n                    key=\"delete\"\n                    color=\"red\"\n                    onClick={() => handleBillRemoval(bill)}\n                  />,\n                ]}\n              >\n                <Meta\n                  title={`${bill.amount} $`}\n                  description={`${bill.category}`}\n                  className=\"bill-header\"\n                />\n                <Meta description={`${bill.description}`} />\n                <Meta description={moment(bill.date).format(\"DD-MM-YYYY\")} />\n              </Card>\n            );\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default BillingDetails;\n"]},"metadata":{},"sourceType":"module"}